<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script type="text/javascript" src="clientProfileScript.js"></script>
    <title>Client Profile</title>
</head>
<body>
    <nav>
        <a th:href="@{/home}"><img src="/logo.svg" class="logo" alt="workout coach" height="50" width="125"></a>
        <a th:href="@{/home}" class="nav-element">Timetable</a>
        <a th:href="@{/clientList}" class="nav-element">Client List</a>
        <a th:href="@{/payments}" class="nav-element">Payments</a>
        <a th:href="@{/settings}" class="nav-element">Settings</a>
        <form th:action="@{/logout}" method="post">
            <input class="nav-element" type="submit" value="Log out"/>
        </form>
    </nav>

    <section class="content" th:action="@{/clientProfile/?id=${param.id}}" method="GET">
        <div th:if="${status}=='failed'">
            <div th:text="${reason}"></div>
        </div>

        <section th:if="${client}!=null">
            <br>

            <h1>This is:</h1>
            <a th:text="${client.name} +' '+ ${client.surname}"></a>

            <h1>Goal:</h1>
            <section id="goalSection" style="display: block">
                <a th:text="${client.goal}" id="goal"></a>
                <input type="hidden" name="clientID" id="hiddenGoalID" th:value="${param.id}">
                <button type="button" class="editButton" id="goalButton" th:onclick="'javascript:editGoal()'">Edit
                </button>
            </section>

            <h1>Health condition: </h1>
            <section id="healthSection" style="display: block">
                <a th:text="${client.healthCondition}" id="health"></a>
                <input type="hidden" name="clientID" id="hiddenHealthID" th:value="${param.id}">
                <button type="button" class="editButton" id="healthButton" th:onclick="'java:editHealthCondition()'">
                    Edit
                </button>
            </section>

            <h1>Phone number:</h1>
            <section id="phoneSection" style="display: block">
                <a th:text="${client.phoneNumber}" id="phone"></a>
                <input type="hidden" name="clientID" id="hiddenPhoneID" th:value="${param.id}">
                <button type="button" class="editButton" id="phoneButton" th:onclick="'java:editPhoneNumber()'">Edit
                </button>
            </section>

            <h1>Gym name:</h1>
            <section id="gymSection" style="display: block">
                <a th:text="${client.gymName}" id="gym"></a>
                <input type="hidden" name="clientID" id="hiddenGymID" th:value="${param.id}">
                <button type="button" class="editButton" id="gymButton" th:onclick="'java:editGymName()'">Edit
                </button>
            </section>
        </section>

        <br>

        <div th:if="${isActive}==true">
            <br>
            <a th:href="@{/addAppointment(id=${param.id})}" style="text-decoration: none">
                <button class="btn-basic">SET AN APPOINTMENT</button>
            </a>
            <br>
            <form th:action="@{/clientProfile/makeArchived}" method="post">
                <input type="hidden" name="clientID" id="clientID">
                <script>document.getElementById('clientID').value = window.GetURLParameter('id');</script>
                <button type="submit" th:href="@{/makeArchived}" class="btn-basic">ARCHIVE</button>
            </form>

        </div>

        <div th:if="${isActive}==false">
            <br/>
            <form th:action="@{/clientProfile/makeActive}" method="post">
                <input type="hidden" name="clientID" id="clientID">
                <script>document.getElementById('clientID').value = window.GetURLParameter('id');</script>
                <button type="submit" th:href="@{/makeActive}" class="btn-basic">MAKE ACTIVE</button>

            </form>

            <br/>
            <form th:action="@{/clientProfile/deleteClient}" method="post">
                <input type="hidden" name="clientID2" id="clientID2">
                <script>document.getElementById('clientID2').value = window.GetURLParameter('id');</script>
                <button type="submit" th:href="@{/deleteClient}" class="btn-basic">DELETE</button>
            </form>
        </div>

        <div th:if="${activationSuccess}==true">
            <br>Client activated!<br><br>
        </div>

        <div th:if="${archivingSuccess}==true">
            <br>Client archived!<br><br>
        </div>
    </section>
</body>
</html>